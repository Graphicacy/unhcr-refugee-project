{"version":3,"sources":["assets/data/refugees.csv","constants.js","App/Map/Circles/index.js","utils.js","App/Map/Tooltip/index.js","App/Map/ArrivalsFilterBar/index.js","App/Map/index.js","App/Spinner/index.js","App/SidebarContainer/Sidebar/BuiltBy/index.js","App/SidebarContainer/SidebarDetailed/BaseChart/index.js","App/SidebarContainer/Sidebar/Legend/index.js","App/SidebarContainer/Sidebar/CustomSelect/index.js","App/SidebarContainer/Sidebar/City/index.js","App/SidebarContainer/Sidebar/CitySearch/index.js","App/SidebarContainer/Sidebar/index.js","App/SidebarContainer/SidebarDetailed/Axes/index.js","App/SidebarContainer/SidebarDetailed/Voronoi/index.js","App/SidebarContainer/SidebarDetailed/LineChart/index.js","App/SidebarContainer/SidebarDetailed/Resources/index.js","App/SidebarContainer/SidebarDetailed/index.js","App/SidebarContainer/DataSources/index.js","App/SidebarContainer/SidebarFilter/index.js","App/SidebarContainer/index.js","App/index.js","index.js","assets/images/search.svg","assets/images/filter.svg"],"names":["module","exports","COLORS","COMMA_FORMATTER","format","REGION_LOOKUP","Map","DEFAULT_VIEWPORT","latitude","longitude","zoom","bearing","pitch","YEARS","range","MAX_YEAR","Circles","data","paint","data_id","id","type","cityToId","city","kebabCase","getCalendarYear","year","getValue","d","selectedYear","sum","x","useStyles","makeStyles","theme","headerContainer","textAlign","width","props","tooltipWidth","minHeight","background","opacity","color","padding","countryOfOriginContainer","display","flexDirection","alignItem","lineContainer","alignItems","marginBottom","countryText","fontSize","line","backgroundColor","height","borderRadius","marginRight","lineText","content","paddingLeft","paddingTop","infoText","fontStyle","Tooltip","popupInfo","selectedCalendarYear","y","useState","tooltipHeight","setTooltipHeight","classes","tooltipRef","useRef","useEffect","offsetHeight","current","location","properties","numRefugees","total_per_city","valueAccessor","topFiveNationalities","JSON","parse","rows","sort","a","b","descending","slice","xScale","scaleLinear","domain","max","map","className","style","left","top","ref","i","key","container","position","zIndex","boxShadow","innerContainer","justifyContent","flex","description","fontWeight","textOverflow","whiteSpace","overflow","button","textTransform","ArrivalsFilterBar","nationalities","setState","sortedNationalities","ascending","join","title","Button","onClick","prevState","selectedNationalities","variant","endIcon","Close","messageClass","mapStyle","state","history","useHistory","mapRef","offsetWidth","features","cities","firstRow","geometry","maxTotalPerCity","length","viewport","onViewportChange","dragRotate","mapboxApiAccessToken","process","onHover","event","srcEvent","offsetX","offsetY","hoveredFeature","find","f","layer","selectedFeature","push","pathname","property","stops","marginTop","stroke","Spinner","CircularProgress","builtBy","BuiltBy","href","target","rel","BaseChart","margin","children","initialDimensions","dimensions","setDimensions","node","setNode","useCallback","useLayoutEffect","measure","debounce","window","requestAnimationFrame","rect","getBoundingClientRect","right","bottom","getDimensionObject","isResized","addEventListener","removeEventListener","useDimensions","visualizationRef","innerWidth","innerHeight","transform","cloneElement","legend","strokeWidth","fill","Legend","filteredFeatures","rollups","v","maxCity","shift","minCity","pop","bubbleScale","minValue","maxValue","values","r","cy","x1","dx","textAnchor","x2","y1","y2","BootstrapInput","withStyles","root","spacing","input","InputBase","formControl","paddingRight","selectEmpty","label","select","CustomSelect","items","selectedItem","onChange","FormControl","Select","value","evt","item","MenuItem","row","paddingBottom","cursor","lineHeight","subLocation","City","innerInput","CitySearch","searchText","setSearchText","TextField","placeholder","InputProps","startAdornment","InputAdornment","alt","src","searchIcon","text","legendContainer","topCitiesContainer","overflowY","alignSelf","subTitle","legendInnerContainer","columnContainer","column","Sidebar","years","toString","concat","topCitiesByYear","filter","toLowerCase","includes","isFilterOpen","startIcon","filterIcon","topCity","axis","textRendering","shapeRendering","xAxis","yAxis","Axes","yScale","xScaleTickFormat","yScaleTickFormat","xAxisRef","yAxisRef","renderXAxis","renderYAxis","call","axisLeft","ticks","tickFormat","remove","selectAll","axisBottom","path","Voronoi","points","onMouseOver","voronoi","Delaunay","from","idx","renderCell","pointerEvents","circle","activeText","LineChart","activePoint","setActivePoint","xAccessor","scaleTime","extent","yAccessor","d3_line","nestedData","nest","country","entries","formatPoint","merge","onMouseOut","lastPoint","point","dy","subHeader","Resources","selectedCity","featureCollection","turf","resources","coordinates","buffered","units","resourcesWithinBuffer","resource","distance","nonprofit_name","organization_ein","website","close","closeIcon","header","innerHeader","visualization","SidebarDetailed","moment","Nationality","totalRefugees","dataSources","DataSources","WhiteCheckbox","checked","Checkbox","regionContainer","regionOuterContainer","buttonContainer","border","SidebarFilter","nestedNationalities","groups","onlyNationalities","Set","localNationalities","setLocalNationalities","onRegionChange","isRegionChecked","xs","onCountryChange","has","region","every","FormControlLabel","control","name","disabled","size","Array","SidebarContainer","App","useParams","csv","require","nationality","center","then","results","useMemo","get","transitionInterpolator","FlyToInterpolator","speed","transitionDuration","ReactDOM","render","basename","component","document","getElementById"],"mappings":"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","file":"static/js/main.b8bfc2b5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/refugees.ccb81835.csv\";","import { format } from 'd3-format';\nimport { range } from 'd3-array';\n\nexport const COLORS = {\n  blue: '#2588ac',\n  darkRed: '#8F0A09',\n  mediumRed: '#b2201f',\n  lightRed: '#d84544',\n  darkGray: '#343131',\n  grayLighter: '#f2f2f2',\n  gray: '#f1f4f4',\n  mediumGray: '#ccd3d3',\n  white: '#fff',\n  black: '#000',\n  headerColor: '#fcefea',\n};\nexport const ALL_YEARS = 'All Years';\n\nexport const SPEED = 1.4;\n\nexport const COMMA_FORMATTER = format(',.0f');\n\nexport const REGION_LOOKUP = new Map([\n  ['Honduras', 'Central America'],\n  ['Cuba', 'Central America'],\n  ['Guatemala', 'Central America'],\n  ['El Salvador', 'Central America'],\n  ['Jamaica', 'Central America'],\n  ['Haiti', 'Central America'],\n  ['Afghanistan', 'Central Asia'],\n  ['Uzbekistan', 'Central Asia'],\n  ['Kazakhstan', 'Central Asia'],\n  ['Turkmenistan', 'Central Asia'],\n  ['Kyrgyzstan', 'Central Asia'],\n  ['Tajikistan', 'Central Asia'],\n  ['China', 'East Asia'],\n  ['Mongolia', 'East Asia'],\n  ['Ukraine', 'Eastern Europe'],\n  ['Serbia', 'Eastern Europe'],\n  ['Turkey', 'Eastern Europe'],\n  ['Armenia', 'Eastern Europe'],\n  ['Belarus', 'Eastern Europe'],\n  ['Bulgaria', 'Eastern Europe'],\n  ['Azerbaijan', 'Eastern Europe'],\n  ['Latvia', 'Eastern Europe'],\n  ['Georgia', 'Eastern Europe'],\n  ['Lithuania', 'Eastern Europe'],\n  ['Estonia', 'Eastern Europe'],\n  ['Croatia', 'Eastern Europe'],\n  ['Iraq', 'Middle East'],\n  ['Jordan', 'Middle East'],\n  ['United Arab Emirates', 'Middle East'],\n  ['Lebanon', 'Middle East'],\n  ['Kuwait', 'Middle East'],\n  ['Yemen', 'Middle East'],\n  ['Saudi Arabia', 'Middle East'],\n  ['Djibouti', 'Middle East'],\n  ['Israel', 'Middle East'],\n  ['Oman', 'Middle East'],\n  ['Algeria', 'North Africa'],\n  ['Egypt', 'North Africa'],\n  ['Tunisia', 'North Africa'],\n  ['Libya', 'North Africa'],\n  ['Morocco', 'North Africa'],\n  ['Canada', 'North America'],\n  ['Colombia', 'South America'],\n  ['Ecuador', 'South America'],\n  ['Pakistan', 'South Asia'],\n  ['India', 'South Asia'],\n  ['Nepal', 'South Asia'],\n  ['Bhutan', 'South-East Asia'],\n  ['Cambodia', 'South-East Asia'],\n  ['Bangladesh', 'South-East Asia'],\n  ['Indonesia', 'South-East Asia'],\n  ['Thailand', 'South-East Asia'],\n  ['Malaysia', 'South-East Asia'],\n  ['Philippines', 'South-East Asia'],\n  ['New Zealand', 'South-East Asia'],\n  ['Somalia', 'Sub-Saharan Africa'],\n  ['Ethiopia', 'Sub-Saharan Africa'],\n  ['Burundi', 'Sub-Saharan Africa'],\n  ['Central African Republic', 'Sub-Saharan Africa'],\n  ['Eritrea', 'Sub-Saharan Africa'],\n  ['Rwanda', 'Sub-Saharan Africa'],\n  ['Sudan', 'Sub-Saharan Africa'],\n  ['Congo', 'Sub-Saharan Africa'],\n  ['Guinea', 'Sub-Saharan Africa'],\n  ['Liberia', 'Sub-Saharan Africa'],\n  ['Uganda', 'Sub-Saharan Africa'],\n  ['Cameroon', 'Sub-Saharan Africa'],\n  ['Chad', 'Sub-Saharan Africa'],\n  ['Senegal', 'Sub-Saharan Africa'],\n  ['Sierra Leone', 'Sub-Saharan Africa'],\n  ['Togo', 'Sub-Saharan Africa'],\n  ['Equatorial Guinea', 'Sub-Saharan Africa'],\n  ['Gabon', 'Sub-Saharan Africa'],\n  ['South Africa', 'Sub-Saharan Africa'],\n  ['Kenya', 'Sub-Saharan Africa'],\n  ['Zimbabwe', 'Sub-Saharan Africa'],\n  ['Gambia', 'Sub-Saharan Africa'],\n  ['Nigeria', 'Sub-Saharan Africa'],\n  ['Mali', 'Sub-Saharan Africa'],\n  ['Mauritania', 'Sub-Saharan Africa'],\n  ['Malawi', 'Sub-Saharan Africa'],\n  ['Angola', 'Sub-Saharan Africa'],\n  ['Ghana', 'Sub-Saharan Africa'],\n  ['Niger', 'Sub-Saharan Africa'],\n  ['Botswana', 'Sub-Saharan Africa'],\n  ['Benin', 'Sub-Saharan Africa'],\n  ['Namibia', 'Sub-Saharan Africa'],\n  ['Zambia', 'Sub-Saharan Africa'],\n  ['Sweden', 'Western Europe'],\n  ['Norway', 'Western Europe'],\n  ['Netherlands', 'Western Europe'],\n  ['Belgium', 'Western Europe'],\n  ['Burma', 'South-East Asia'],\n  ['Vietnam', 'South-East Asia'],\n  ['Dem. Rep. Congo', 'Sub-Saharan Africa'],\n  ['Iran', 'Middle East'],\n  ['Ivory Coast', 'Sub-Saharan Africa'],\n  ['Palestine', 'Middle East'],\n  ['Republic of South Sudan', 'Sub-Saharan Africa'],\n  ['Russia', 'Eastern Europe'],\n  ['Moldova', 'Eastern Europe'],\n  ['Korea, North', 'East Asia'],\n  ['Syria', 'Middle East'],\n  ['Sri Lanka (Ceylon)', 'South-East Asia'],\n  ['Laos', 'South-East Asia'],\n  ['Gaza Strip', 'Middle East'],\n  ['Tibet', 'East Asia'],\n  ['United Kingdom', 'Western Europe'],\n  ['Tanzania', 'Sub-Saharan Africa'],\n  ['Venezuela', 'South America'],\n  ['Guinea - Bissau', 'Sub-Saharan Africa'],\n  ['Burkina Faso (UVolta)', 'Sub-Saharan Africa'],\n]);\n\nexport const SIDEBAR_WIDTH = 510;\n\nexport const DEFAULT_VIEWPORT = {\n  latitude: 39.8283459,\n  longitude: -98.5794797,\n  zoom: 4,\n  bearing: 0,\n  pitch: 0,\n};\n\nexport const LAYER_ID = 'circles';\nexport const MIN_YEAR = 2010;\nexport const MAX_YEAR = 2020;\nexport const YEARS = range(MIN_YEAR, MAX_YEAR + 1);\n\nexport const MIN_RADIUS = 5;\nexport const MAX_RADIUS = 25;\nexport const CIRCLE_OPACITY = 0.7;\n","import React from 'react';\nimport { Source, Layer } from 'react-map-gl';\nimport { LAYER_ID } from '../../../constants';\n\nconst Circles = ({ data, paint, data_id }) => {\n  return (\n    <Source id={data_id} type=\"geojson\" data={data}>\n      <Layer id={LAYER_ID} type=\"circle\" paint={paint} />\n    </Source>\n  );\n};\n\nexport default Circles;\n","import { useCallback, useState, useLayoutEffect } from 'react';\nimport debounce from 'lodash.debounce';\nimport useConstant from 'use-constant';\nimport AwesomeDebouncePromise from 'awesome-debounce-promise';\nimport { useAsync } from 'react-async-hook';\nimport kebabCase from 'lodash.kebabcase';\nimport { ALL_YEARS, YEARS } from './constants';\nimport { sum } from 'd3-array';\n\nexport const cityToId = (city) => kebabCase(city);\nconst getCalendarYear = (year) => `CY ${year}`;\nexport const getValue = (d, selectedYear) =>\n  selectedYear !== ALL_YEARS ? +d[getCalendarYear(selectedYear)] : sum(YEARS, (x) => +d[getCalendarYear(x)]);\n\nfunction getDimensionObject(node) {\n  const rect = node.getBoundingClientRect();\n\n  return {\n    width: rect.width,\n    height: rect.height,\n    top: 'x' in rect ? rect.x : rect.top,\n    left: 'y' in rect ? rect.y : rect.left,\n    x: 'x' in rect ? rect.x : rect.left,\n    y: 'y' in rect ? rect.y : rect.top,\n    right: rect.right,\n    bottom: rect.bottom,\n  };\n}\n\nexport const useDimensions = (initialDimensions) => {\n  const [dimensions, setDimensions] = useState(initialDimensions);\n  const [node, setNode] = useState(null);\n\n  const ref = useCallback((node) => {\n    setNode(node);\n  }, []);\n\n  useLayoutEffect(() => {\n    if (node) {\n      const measure = debounce(\n        () => window.requestAnimationFrame(() => setDimensions({ ...getDimensionObject(node), isResized: true })),\n        250,\n      );\n      measure();\n\n      window.addEventListener('resize', measure);\n\n      return () => {\n        window.removeEventListener('resize', measure);\n      };\n    }\n  }, [node]);\n\n  return [ref, dimensions, node];\n};\n\n// Generic reusable hook\nexport const useDebouncedSearch = (searchFunction) => {\n  // Handle the input text state\n  const [inputText, setInputText] = useState('');\n\n  // Debounce the original search async function\n  const debouncedSearchFunction = useConstant(() => AwesomeDebouncePromise(searchFunction, 300));\n\n  // The async callback is run each time the text changes,\n  // but as the search function is debounced, it does not\n  // fire a new request on each keystroke\n  const searchResults = useAsync(async () => {\n    if (inputText.length === 0) {\n      return [];\n    } else {\n      return debouncedSearchFunction(inputText);\n    }\n  }, [debouncedSearchFunction, inputText]);\n\n  // Return everything needed for the hook consumer\n  return {\n    inputText,\n    setInputText,\n    searchResults,\n  };\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport { scaleLinear } from 'd3-scale';\nimport { descending, max } from 'd3-array';\nimport { makeStyles } from '@material-ui/core';\nimport { COLORS, COMMA_FORMATTER } from '../../../constants';\nimport { getValue } from '../../../utils';\n\nconst useStyles = makeStyles((theme) => ({\n  headerContainer: {\n    textAlign: 'left',\n    width: (props) => props.tooltipWidth,\n    minHeight: '85px',\n    background: '#8f0a09 0 0 no-repeat padding-box',\n    opacity: '0.95',\n    color: '#ffffff',\n    padding: '0 0 10px 0',\n  },\n  countryOfOriginContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItem: 'center',\n  },\n  lineContainer: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: '10px',\n  },\n  countryText: {\n    fontSize: '16px',\n    color: COLORS.darkGray,\n    width: '50%',\n  },\n  line: {\n    backgroundColor: COLORS.darkRed,\n    height: '5px',\n    borderRadius: '11px',\n    marginRight: '5px',\n  },\n  lineText: {\n    fontSize: '16px',\n    color: COLORS.darkRed,\n  },\n  content: {\n    textAlign: 'left',\n    fontSize: '16px',\n    color: COLORS.darkGray,\n    paddingLeft: '19px',\n    paddingTop: '12px',\n  },\n  infoText: {\n    textAlign: 'right',\n    fontSize: '14px',\n    fontStyle: 'italic',\n    color: COLORS.darkRed,\n    padding: '10px',\n  },\n}));\n\nconst Tooltip = ({ popupInfo, selectedCalendarYear, x, y, width, height }) => {\n  const tooltipWidth = 325;\n  const [tooltipHeight, setTooltipHeight] = useState(300);\n  const buffer = 10;\n  const classes = useStyles({ tooltipWidth });\n  const tooltipRef = useRef(null);\n\n  useEffect(() => {\n    const { offsetHeight } = tooltipRef.current;\n    setTooltipHeight(offsetHeight);\n  }, []);\n\n  // Sort nationalities by number of refugees\n  const location = popupInfo.properties.location;\n  const numRefugees = popupInfo.properties.total_per_city;\n  const valueAccessor = (d) => getValue(d, selectedCalendarYear);\n  let nationalities = JSON.parse(popupInfo.properties.rows).sort((a, b) => descending(valueAccessor(a), valueAccessor(b)));\n\n  // Get the top five to display\n  const topFiveNationalities = nationalities.slice(0, 5);\n  const xScale = scaleLinear()\n    .range([0, 100])\n    .domain([0, max(topFiveNationalities.map(valueAccessor))]);\n\n  // If the tooltip is going over the edge of the right side of the screen\n  if (tooltipWidth + x > width - buffer) {\n    x -= tooltipWidth;\n  }\n\n  // If the tooltip is going over the edge of the bottom side of the screen\n  if (tooltipHeight + y > height - buffer) {\n    y -= tooltipHeight;\n  }\n\n  return (\n    <div className=\"tooltip\" style={{ left: x, top: y }} ref={tooltipRef}>\n      <div className={classes.headerContainer}>\n        <div className=\"tooltip_header_title\">{location}</div>\n        <div className=\"tooltip_header_subtitle\">{`${COMMA_FORMATTER(numRefugees)} refugees arrived in ${selectedCalendarYear}`}</div>\n      </div>\n      <div className=\"tooltip_subheader\">TOP 5 COUNTRIES OF ORIGIN</div>\n      <div className={classes.content}>\n        <div className={classes.countryOfOriginContainer}>\n          {topFiveNationalities.map((d, i) => {\n            return (\n              <div key={`nationality-${i}`} className={classes.lineContainer}>\n                <div className={classes.countryText}>{d['Nationality']}</div>\n                <div className={classes.line} style={{ width: xScale(valueAccessor(d)) }} />\n                <div className={classes.lineText}>{COMMA_FORMATTER(valueAccessor(d))}</div>\n              </div>\n            );\n          })}\n        </div>\n        <div className={classes.infoText}>Click on city to see more info</div>\n      </div>\n    </div>\n  );\n};\n\nexport default Tooltip;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { COLORS } from '../../../constants';\nimport { Button } from '@material-ui/core';\nimport { Close } from '@material-ui/icons';\nimport { ascending } from 'd3-array';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    width: '100%',\n    height: '61px',\n    position: 'absolute',\n    zIndex: '4',\n    top: 0,\n    left: 0,\n    backgroundColor: COLORS.headerColor,\n    boxShadow: `0 3px 6px 0 rgba(0, 0, 0, 0.16)`,\n  },\n  innerContainer: {\n    padding: '14px 23px 13px 23px',\n    color: COLORS.darkRed,\n    fontSize: '20px',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    flex: '1 1 100%',\n  },\n  description: {\n    '& span': {\n      fontWeight: 'bold',\n    },\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n  },\n  button: {\n    fontWeight: 'bold',\n    textTransform: 'none',\n    backgroundColor: COLORS.headerColor,\n    flex: '0 0 142px',\n    whiteSpace: 'nowrap',\n  },\n}));\n\nconst ArrivalsFilterBar = ({ nationalities, setState }) => {\n  const classes = useStyles();\n\n  const clearFilters = () =>\n    setState((prevState) => ({\n      ...prevState,\n      selectedNationalities: [],\n    }));\n\n  const sortedNationalities = nationalities.sort(ascending).join(', ');\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.innerContainer}>\n        <div className={classes.description} title={sortedNationalities}>\n          Showing Arrivals from:{` `}\n          <span>{sortedNationalities}</span>\n        </div>\n        <Button onClick={clearFilters} variant=\"contained\" endIcon={<Close />} className={classes.button}>\n          Clear Filters\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default ArrivalsFilterBar;\n","import React, { useState, useRef, useEffect } from 'react';\nimport ReactMapGL from 'react-map-gl';\nimport { CIRCLE_OPACITY, COLORS, LAYER_ID, MAX_RADIUS, MIN_RADIUS, SIDEBAR_WIDTH } from '../../constants';\nimport Circles from './Circles';\nimport Tooltip from './Tooltip';\nimport { max, sum } from 'd3-array';\nimport { useHistory } from 'react-router-dom';\nimport { cityToId, getValue } from '../../utils';\nimport ArrivalsFilterBar from './ArrivalsFilterBar';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  map: {\n    position: 'absolute',\n    width: `calc(100vw - ${SIDEBAR_WIDTH}px)`,\n    height: '100%',\n  },\n}));\n\nconst Map = (props) => {\n  const classes = useStyles();\n  const [state, setState] = useState({\n    messageClass: 'visible',\n    mapStyle: 'mapbox://styles/mapbox/light-v9',\n    popupInfo: null,\n    x: 0,\n    y: 0,\n    width: 100,\n    height: 100,\n  });\n  const history = useHistory();\n  const mapRef = useRef(null);\n\n  useEffect(() => {\n    const { offsetWidth, offsetHeight } = mapRef.current;\n    setState((prevState) => {\n      return {\n        ...prevState,\n        width: offsetWidth,\n        height: offsetHeight,\n      };\n    });\n  }, []);\n\n  const _onViewportChange = (viewport) =>\n    props.setState((prevState) => {\n      return {\n        ...prevState,\n        viewport,\n      };\n    });\n\n  const _onHover = (event) => {\n    const {\n      features,\n      srcEvent: { offsetX, offsetY },\n    } = event;\n    const hoveredFeature = features && features.find((f) => f.layer.id === LAYER_ID);\n    setState((prevState) => ({ ...prevState, popupInfo: hoveredFeature, x: offsetX, y: offsetY }));\n  };\n\n  const _onMouseClick = (event) => {\n    const { features } = event;\n    const selectedFeature = features && features.find((f) => f.layer.id === LAYER_ID);\n    return history.push({ pathname: `/${cityToId(selectedFeature?.properties?.location)}` });\n  };\n\n  const features = props.cities.map(([city, rows]) => {\n    const firstRow = rows[0];\n    return {\n      type: 'Feature',\n      properties: {\n        location: city,\n        total_per_city: sum(rows, (d) => getValue(d, props.state.selectedCalendarYear)),\n        rows,\n      },\n      geometry: firstRow.geometry,\n    };\n  });\n\n  // Get a scale for the different circle sizes\n  const maxTotalPerCity = max(features, (d) => +d.properties.total_per_city);\n\n  return (\n    <>\n      <div className={classes.map} ref={mapRef}>\n        {!!props.state.selectedNationalities.length && (\n          <ArrivalsFilterBar setState={props.setState} nationalities={props.state.selectedNationalities} />\n        )}\n        <ReactMapGL\n          {...props.state.viewport}\n          width=\"100%\"\n          height=\"100%\"\n          mapStyle={state.mapStyle}\n          onViewportChange={_onViewportChange}\n          dragRotate={false}\n          mapboxApiAccessToken={process.env.REACT_APP_MAPBOX_TOKEN}\n          onHover={_onHover}\n          onClick={_onMouseClick}\n        >\n          <Circles\n            data={{\n              type: 'FeatureCollection',\n              features,\n            }}\n            paint={{\n              'circle-radius': {\n                property: 'total_per_city',\n                stops: [\n                  [0, MIN_RADIUS],\n                  [maxTotalPerCity, MAX_RADIUS],\n                ],\n              },\n              'circle-opacity': CIRCLE_OPACITY,\n              'circle-color': COLORS.darkRed,\n            }}\n            data_id=\"refugee_circles\"\n          />\n        </ReactMapGL>\n      </div>\n      {state.popupInfo && <Tooltip {...state} selectedCalendarYear={props.state.selectedCalendarYear} />}\n    </>\n  );\n};\n\nexport default Map;\n","import React from 'react';\nimport { CircularProgress } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(() => ({\n  container: {\n    display: 'flex',\n    justifyContent: 'center',\n    marginTop: '25%',\n    '& circle': {\n      stroke: 'green',\n    },\n  },\n}));\n\nconst Spinner = () => {\n  const classes = useStyles();\n  return (\n    <div className={classes.container}>\n      <CircularProgress />\n    </div>\n  );\n};\n\nexport default Spinner;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core';\nimport { COLORS } from '../../../../constants';\n\nconst useStyles = makeStyles(() => ({\n  builtBy: {\n    fontSize: '14px',\n    color: COLORS.white,\n    '& a': {\n      color: COLORS.white,\n      fontWeight: 'bold',\n    },\n  },\n}));\n\nconst BuiltBy = () => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.builtBy}>\n      <div>\n        Built by{` `}\n        <a href=\"https://www.graphicacy.com\" target=\"_blank\" rel=\"noopener noreferrer\">\n          Graphicacy\n        </a>\n        {` `}with{` `}\n        <a href=\"https://www.unhcr.org/en-us\" target=\"_blank\" rel=\"noopener noreferrer\">\n          UNHCR\n        </a>\n        {` `}for{` `}\n        <a href=\"https://opportunity.census.gov\" target=\"_blank\" rel=\"noopener noreferrer\">\n          The Opportunity Project 2020\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default BuiltBy;\n","import React, { cloneElement } from 'react';\nimport { useDimensions } from '../../../../utils';\n\nconst BaseChart = ({ margin, className, children }) => {\n  const [visualizationRef, { width, height, isResized }] = useDimensions({\n    width: 100,\n    height: 50,\n    isResized: false,\n  });\n  if (!margin) {\n    margin = {\n      left: 40,\n      right: 120,\n      top: 40,\n      bottom: 40,\n    };\n  }\n  const innerWidth = width - margin.left - margin.right;\n  const innerHeight = height - margin.top - margin.bottom;\n\n  return (\n    <svg width={width} height={height} ref={visualizationRef} className={className}>\n      <g transform={`translate(${margin.left},${margin.top})`}>\n        {isResized &&\n          cloneElement(children, {\n            innerWidth,\n            innerHeight,\n            margin,\n          })}\n      </g>\n    </svg>\n  );\n};\n\nexport default BaseChart;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { COLORS, COMMA_FORMATTER, MAX_RADIUS, MIN_RADIUS } from '../../../../constants';\nimport { scaleLinear } from 'd3-scale';\nimport { descending, rollups, sum } from 'd3-array';\nimport { getValue } from '../../../../utils';\n\nconst useStyles = makeStyles(() => ({\n  legend: {\n    '& circle': {\n      stroke: COLORS.lightRed,\n      strokeWidth: '2px',\n      fill: COLORS.darkRed,\n    },\n    '& text': {\n      fill: COLORS.white,\n      stroke: 'none',\n      fontSize: '14px',\n    },\n  },\n  line: {\n    strokeWidth: '1px',\n    stroke: COLORS.white,\n    fill: 'none',\n  },\n}));\n\nconst Legend = ({ innerHeight, innerWidth, filteredFeatures, selectedCalendarYear }) => {\n  const classes = useStyles();\n\n  // Group the data by city and create a feature collection\n  const cities = rollups(\n    filteredFeatures,\n    (v) => sum(v, (d) => getValue(d, selectedCalendarYear)),\n    (d) => d.location,\n  ).sort((a, b) => descending(a[1], b[1]));\n  const maxCity = cities.shift();\n  const minCity = cities.pop();\n\n  const bubbleScale = scaleLinear().range([MIN_RADIUS, MAX_RADIUS]).domain([minCity[1], maxCity[1]]);\n\n  const [minValue, maxValue] = bubbleScale.domain();\n  const values = [maxValue, (maxValue - minValue) / 2, minValue];\n\n  return (\n    <g className={classes.legend} transform={`translate(${innerWidth / 5},0)`}>\n      {values.map((d, i) => {\n        const r = bubbleScale(d);\n        return <circle key={`bubble-for-${i}-value`} cy={innerHeight - r} r={r} />;\n      })}\n      {values.map((d, i) => {\n        const r = bubbleScale(d);\n        const x1 = i % 2 ? -30 : 0;\n        const dx = i % 2 ? -5 : 35;\n        const textAnchor = i % 2 ? 'end' : 'start';\n        const y = innerHeight - r * 2;\n        return (\n          <g key={`line-for-${i}-value`} transform={`translate(${x1},0)`}>\n            <line className={classes.line} x1={0} x2={30} y1={y} y2={y} />\n            <text dx={dx} y={y + 5} style={{ textAnchor }}>\n              {COMMA_FORMATTER(d)}\n            </text>\n          </g>\n        );\n      })}\n    </g>\n  );\n};\nexport default Legend;\n","import React from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport { MenuItem, FormControl, Select, InputBase } from '@material-ui/core';\nimport { COLORS } from '../../../../constants';\n\nconst BootstrapInput = withStyles((theme) => ({\n  root: {\n    'label + &': {\n      color: COLORS.white,\n      marginTop: theme.spacing(3),\n    },\n  },\n  input: {\n    color: COLORS.white,\n    padding: '6.5px 26px 6.5px 16px',\n  },\n}))(InputBase);\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    display: 'flex',\n    flexDirection: 'row',\n    width: 'calc(100% - 5px)',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    paddingRight: '5px',\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  label: {\n    color: COLORS.white,\n    fontSize: '14px',\n    paddingRight: theme.spacing(1),\n  },\n  select: {\n    width: '142px',\n    fontSize: '16px',\n    fontWeight: 'bold',\n    borderRadius: 5,\n    backgroundColor: COLORS.lightRed,\n    boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.2)',\n    '.MuiSelect-select': {\n      paddingLeft: theme.spacing(1),\n    },\n    '&:hover:not(.Mui-disabled):before, &:before': {\n      display: 'none',\n    },\n    '&:after': {\n      display: 'none',\n    },\n  },\n}));\n\nconst CustomSelect = ({ items, selectedItem, onChange, label, id = 'calendar-year-select' }) => {\n  const classes = useStyles();\n\n  return (\n    <FormControl className={classes.formControl}>\n      <div className={classes.label}>{label}</div>\n      <Select value={selectedItem} onChange={(evt) => onChange(evt.target.value)} className={classes.select} input={<BootstrapInput />}>\n        {items.map((item) => {\n          return (\n            <MenuItem key={`${id}-menu-item-${item}`} value={item}>\n              {item}\n            </MenuItem>\n          );\n        })}\n      </Select>\n    </FormControl>\n  );\n};\nexport default CustomSelect;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core';\nimport { COLORS, COMMA_FORMATTER } from '../../../../constants';\nimport { cityToId } from '../../../../utils';\nimport { useHistory } from 'react-router-dom';\n\nconst useStyles = makeStyles(() => ({\n  row: {\n    display: 'flex',\n    flexDirection: 'column',\n    color: COLORS.darkGray,\n    fontSize: '24px',\n    paddingBottom: '10px',\n    cursor: 'pointer',\n  },\n  location: {\n    fontWeight: 'bold',\n    lineHeight: '1.33',\n  },\n  subLocation: {\n    fontSize: '18px',\n    lineHeight: '1.78',\n    '& span': {\n      fontWeight: 'bold',\n    },\n  },\n}));\n\nconst City = ({ city, selectedCalendarYear }) => {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const onClick = () => history.push({ pathname: `/${cityToId(city[0])}` });\n\n  return (\n    <div className={classes.row} onClick={onClick}>\n      <div className={classes.location}>{city[0]}</div>\n      <div className={classes.subLocation}>\n        <span>{COMMA_FORMATTER(city[1])}</span>\n        {` refugees arrived in ${selectedCalendarYear}`}\n      </div>\n    </div>\n  );\n};\n\nexport default City;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport TextField from '@material-ui/core/TextField';\nimport searchIcon from '../../../../assets/images/search.svg';\nimport { COLORS } from '../../../../constants';\n\nconst useStyles = makeStyles((theme) => ({\n  input: {\n    backgroundColor: COLORS.lightRed,\n    borderRadius: '5px',\n    color: COLORS.white,\n    '& img': {\n      padding: '5px 10px',\n    },\n  },\n  innerInput: {\n    color: COLORS.white,\n    fontWeight: 'bold',\n  },\n}));\n\nconst CitySearch = ({ searchText, setSearchText }) => {\n  const classes = useStyles();\n\n  return (\n    <TextField\n      className={classes.input}\n      id=\"city-search\"\n      placeholder=\"Search for a City\"\n      value={searchText}\n      onChange={(evt) => setSearchText(evt.target.value)}\n      InputProps={{\n        className: classes.innerInput,\n        startAdornment: (\n          <InputAdornment position=\"start\">\n            <img alt=\"Magnifying glass representing how to search for a city in the US\" src={searchIcon} />\n          </InputAdornment>\n        ),\n      }}\n    />\n  );\n};\nexport default CitySearch;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ALL_YEARS, COLORS, YEARS } from '../../../constants';\nimport BuiltBy from './BuiltBy';\nimport BaseChart from '../SidebarDetailed/BaseChart';\nimport Legend from './Legend';\nimport CustomSelect from './CustomSelect';\nimport { descending, sum } from 'd3-array';\nimport { getValue } from '../../../utils';\nimport City from './City';\nimport CitySearch from './CitySearch';\nimport filterIcon from '../../../assets/images/filter.svg';\nimport { Button } from '@material-ui/core';\n\nconst useStyles = makeStyles(() => ({\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n    position: 'relative',\n  },\n  text: {\n    fontSize: '24px',\n  },\n  headerContainer: {\n    backgroundColor: COLORS.darkRed,\n    padding: '0 25px 37px 23px',\n  },\n  legendContainer: {\n    backgroundColor: COLORS.mediumRed,\n    flex: '0 0 125px',\n    height: '183px',\n    padding: '30px',\n  },\n  topCitiesContainer: {\n    padding: '0 25px 25px',\n    flex: '1 1 100%',\n    overflowY: 'auto',\n  },\n  legend: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    alignSelf: 'center',\n  },\n  subTitle: {\n    fontSize: '16px',\n    color: COLORS.black,\n    fontWeight: 'bold',\n  },\n  legendInnerContainer: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    height: '125px',\n  },\n  innerContainer: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: '25px 0 10px',\n    position: 'sticky',\n    backgroundColor: '#fff',\n    top: '0',\n  },\n  columnContainer: {\n    width: '55%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  column: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  cities: {\n    overflowY: 'auto',\n    paddingBottom: '15px',\n  },\n  title: {\n    fontSize: '16px',\n    fontWeight: 'bold',\n    lineHeight: '1.19',\n  },\n  button: {\n    backgroundColor: COLORS.lightRed,\n    color: COLORS.white,\n    fontWeight: 'bold',\n    textTransform: 'none',\n    width: '243px',\n    justifyContent: 'left',\n    marginTop: '10px',\n    borderRadius: '5px',\n    fontSize: '16px',\n  },\n}));\n\nconst Sidebar = ({ cities, filteredFeatures, state, setState }) => {\n  const classes = useStyles();\n  const [searchText, setSearchText] = useState('');\n\n  let years = YEARS.map((d) => d.toString()).concat([ALL_YEARS]);\n  const onSelectChange = (value) => {\n    setState((prevState) => ({\n      ...prevState,\n      selectedCalendarYear: value,\n    }));\n  };\n\n  // Calculate the top cities, using search text to filter them\n  const topCitiesByYear = cities\n    .filter((city) => !searchText || city[0].toLowerCase().includes(searchText.toLowerCase()))\n    .map((city) => {\n      return [city[0], sum(city[1], (d) => getValue(d, state.selectedCalendarYear))];\n    })\n    .sort((a, b) => descending(a[1], b[1]));\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.headerContainer}>\n        <h2>Resettled Refugee Services and Data Explorer</h2>\n        <div className={classes.text}>\n          <p>\n            Explore data on refugee community locations and resources in the United States. Click on a circle to see a list of resources\n            available in that city.\n          </p>\n        </div>\n        <BuiltBy />\n      </div>\n      <div className={classes.legendContainer}>\n        <div className={classes.legendInnerContainer}>\n          <div className={classes.column}>\n            <div className={classes.title}>Number of Arrivals</div>\n            <BaseChart\n              className={classes.legend}\n              margin={{\n                left: 75,\n                right: 75,\n                top: 0,\n                bottom: 0,\n              }}\n            >\n              <Legend filteredFeatures={filteredFeatures} selectedCalendarYear={state.selectedCalendarYear} />\n            </BaseChart>\n          </div>\n          <div className={classes.columnContainer}>\n            <CustomSelect\n              onChange={onSelectChange}\n              items={years}\n              selectedItem={years.find((year) => year === state.selectedCalendarYear)}\n              label=\"Select a year\"\n            />\n            <Button\n              variant=\"contained\"\n              className={classes.button}\n              onClick={() =>\n                setState((prevState) => ({\n                  ...prevState,\n                  isFilterOpen: true,\n                }))\n              }\n              startIcon={<img alt=\"An icon representing how to filter results by nationalities.\" src={filterIcon} />}\n            >\n              Filter results\n            </Button>\n          </div>\n        </div>\n      </div>\n      <div className={classes.topCitiesContainer}>\n        <div className={classes.innerContainer}>\n          <div className={classes.subTitle}>Top Cities by Arrival</div>\n          <CitySearch searchText={searchText} setSearchText={setSearchText} />\n        </div>\n        <div className={classes.cities}>\n          {topCitiesByYear.slice(0, 25).map((topCity) => (\n            <City key={`row-for-${topCity[0]}`} city={topCity} selectedCalendarYear={state.selectedCalendarYear} />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Sidebar;\n","import React, { useEffect, useRef } from 'react';\nimport { select } from 'd3-selection';\nimport { axisBottom, axisLeft } from 'd3-axis';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  axis: {\n    '& text': {\n      textRendering: 'optimizeLegibility',\n      fontSize: '12px',\n      stroke: 'none',\n      fill: 'gray',\n    },\n    '& path, & line': {\n      fill: 'none',\n      stroke: 'lightgray',\n      strokeWidth: '1px',\n      shapeRendering: 'crispEdges',\n    },\n  },\n  xAxis: {\n    '& text': {\n      textAnchor: 'middle',\n    },\n  },\n  yAxis: {\n    '& text': {},\n  },\n}));\n\nconst Axes = ({ xScale, yScale, xScaleTickFormat, yScaleTickFormat, height }) => {\n  const classes = useStyles();\n  const xAxisRef = useRef(null);\n  const yAxisRef = useRef(null);\n\n  useEffect(() => {\n    renderXAxis();\n    renderYAxis();\n  });\n\n  const renderYAxis = () => {\n    const yAxis = select(yAxisRef.current);\n\n    yAxis.call(axisLeft(yScale).ticks(4).tickFormat(yScaleTickFormat));\n    yAxis.select('.domain').remove();\n    yAxis.selectAll('.tick line').remove();\n  };\n\n  const renderXAxis = () => {\n    const xAxis = select(xAxisRef.current);\n\n    xAxis.call(axisBottom(xScale).tickFormat(xScaleTickFormat).ticks(5));\n    xAxis.selectAll('.tick line').remove();\n  };\n\n  return (\n    <g className={classes.axis}>\n      <g className={classes.xAxis} transform={`translate(0,${height})`} ref={xAxisRef} />\n      <g className={classes.yAxis} ref={yAxisRef} />\n    </g>\n  );\n};\nexport default Axes;\n","import React from 'react';\nimport { Delaunay } from 'd3-delaunay';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  path: {\n    fill: 'transparent',\n    cursor: 'pointer',\n  },\n}));\n\nconst Voronoi = ({ points, width, height, onMouseOver }) => {\n  const classes = useStyles();\n  const voronoi = Delaunay.from(\n    points,\n    (d) => d.x,\n    (d) => d.y,\n  ).voronoi([0, 0, width, height]);\n\n  return (\n    <g className=\"voronoi-overlay\">\n      {points.map((item, idx) => {\n        const d = voronoi.renderCell(idx);\n        return <path key={`voronoi-cell-for-${idx}`} d={d} className={classes.path} onMouseOver={onMouseOver(item)} />;\n      })}\n    </g>\n  );\n};\n\nexport default Voronoi;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core';\nimport { scaleLinear, scaleTime } from 'd3-scale';\nimport { line as d3_line } from 'd3-shape';\nimport { descending, extent, max, merge } from 'd3-array';\nimport { nest } from 'd3-collection';\nimport Axes from '../Axes';\nimport { format } from 'd3-format';\nimport Voronoi from '../Voronoi';\nimport { COLORS } from '../../../../constants';\n\nconst useStyles = makeStyles((theme) => ({\n  line: {\n    stroke: '#DDD0D0',\n    fill: 'none',\n    strokeWidth: '1px',\n    shapeRendering: 'geometricPrecision',\n    '&.active': {\n      stroke: COLORS.darkRed,\n      strokeWidth: '2px',\n    },\n    pointerEvents: 'none',\n  },\n  circle: {\n    fill: COLORS.darkRed,\n    stroke: 'none',\n    pointerEvents: 'none',\n  },\n  activeText: {\n    fontSize: '18px',\n    fill: COLORS.darkRed,\n    stroke: 'none',\n    textAnchor: 'middle',\n    fontWeight: 'bold',\n    pointerEvents: 'none',\n  },\n  text: {\n    fontSize: '16px',\n    fill: COLORS.darkRed,\n    stroke: 'none',\n    cursor: 'pointer',\n    textTransform: 'none',\n    '&.active': {\n      fontWeight: 'bold',\n    },\n  },\n}));\n\nconst LineChart = ({ innerHeight, innerWidth, values }) => {\n  const classes = useStyles();\n  const [activePoint, setActivePoint] = useState(null);\n\n  const xAccessor = (d) => d.year;\n  const xScale = scaleTime().range([0, innerWidth]).domain(extent(values, xAccessor));\n\n  const yAccessor = (d) => d?.value;\n  const yScale = scaleLinear()\n    .range([innerHeight, 0])\n    .domain([0, max(values, yAccessor)]);\n\n  const line = d3_line()\n    .x((d) => xScale(xAccessor(d)))\n    .y((d) => yScale(yAccessor(d)));\n\n  const nestedData = nest()\n    .key((d) => d.country)\n    .entries(values);\n\n  const onMouseOver = (point) => () => setActivePoint(point);\n\n  const onMouseOut = () => setActivePoint(null);\n\n  const formatPoint = (key, f) => ({\n    x: xScale(xAccessor(f)),\n    y: yScale(yAccessor(f)),\n    item: {\n      id: key,\n      value: yAccessor(f),\n    },\n  });\n\n  // Calculate points for the Voronoi diagram\n  const points = merge(\n    nestedData.map((d) => {\n      return d.values.map((f) => formatPoint(d.key, f));\n    }),\n  );\n\n  return (\n    <g className=\"countries-over-time\" onMouseOut={onMouseOut}>\n      {nestedData\n        .sort((a, b) => descending(yAccessor(a.values[a.values.length - 1]), yAccessor(b.values[b.values.length - 1])))\n        .map((d, i) => {\n          return (\n            <g key={`group-for-${d.key}`}>\n              <path className={`${classes.line} ${activePoint && activePoint.item.id === d.key ? 'active' : ''}`} d={line(d.values)} />\n              <text\n                className={`${classes.text} ${activePoint && activePoint.item.id === d.key ? 'active' : ''}`}\n                x={innerWidth}\n                dx={'.5em'}\n                y={i * 20}\n                onMouseOver={() => {\n                  const lastPoint = d.values[d.values.length - 1];\n                  return setActivePoint(formatPoint(d.key, lastPoint));\n                }}\n                key={`label-for-${d.key}`}\n              >\n                {d.key}\n              </text>\n            </g>\n          );\n        })}\n      <Voronoi height={innerHeight} width={innerWidth} points={points} onMouseOver={onMouseOver} />\n      {activePoint && (\n        <g transform={`translate(${activePoint.x},${activePoint.y})`}>\n          <circle r={5} className={classes.point} />\n          <text dy=\"-1em\" className={classes.activeText}>\n            {format(',.0f')(activePoint.item.value)}\n          </text>\n        </g>\n      )}\n      <Axes xScale={xScale} yScale={yScale} yScaleTickFormat={format(',.0f')} height={innerHeight} />\n    </g>\n  );\n};\n\nexport default LineChart;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core';\nimport { ascending } from 'd3-array';\nimport * as turf from '@turf/turf';\nimport resources from '../../../../assets/data/refugee_resources.json';\nimport { COLORS, COMMA_FORMATTER } from '../../../../constants';\n\nconst useStyles = makeStyles((theme) => ({\n  subHeader: {\n    textTransform: 'uppercase',\n    color: COLORS.darkGray,\n    fontSize: '14px',\n    paddingTop: '20px',\n  },\n  text: {\n    color: COLORS.darkGray,\n  },\n}));\n\nconst Resources = ({ selectedCity }) => {\n  const classes = useStyles();\n  const [, rows] = selectedCity;\n\n  const featureCollection = turf.featureCollection(resources.features);\n\n  // Get the lat/long of the selected feature and find all resource w/in a 50 mile radius\n  const point = turf.point(rows.length ? rows[0]?.geometry?.coordinates : [0, 0]);\n  const buffered = turf.buffer(point, 50, { units: 'miles' });\n  const resourcesWithinBuffer = turf.pointsWithinPolygon(featureCollection, buffered);\n\n  return (\n    <>\n      <div className={classes.subHeader}>Nearby resources for refugees (within 50 miles)</div>\n      {resourcesWithinBuffer.features\n        .map((resource) => ({\n          ...resource,\n          properties: {\n            ...resource.properties,\n            distance: turf.distance(point, resource, { units: 'miles' }),\n          },\n        }))\n        .sort((a, b) => ascending(a.properties.distance, b.properties.distance))\n        .map((resource) => {\n          const { nonprofit_name, organization_ein, website, distance } = resource.properties;\n          return (\n            <div key={`resource-for-${organization_ein}`} className=\"resource\">\n              {website ? (\n                <a href={website} rel=\"noopener noreferrer\" target=\"_blank\">\n                  {`${nonprofit_name} (${COMMA_FORMATTER(distance)} miles)`}\n                </a>\n              ) : (\n                <div className={classes.text}>{`${nonprofit_name} (${COMMA_FORMATTER(distance)} miles)`}</div>\n              )}\n            </div>\n          );\n        })}\n    </>\n  );\n};\n\nexport default Resources;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core';\nimport BaseChart from './BaseChart';\nimport LineChart from './LineChart';\nimport moment from 'moment';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { merge, sum } from 'd3-array';\nimport { COLORS, COMMA_FORMATTER, YEARS } from '../../../constants';\nimport Resources from './Resources';\nimport { useHistory } from 'react-router-dom';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    backgroundColor: `${COLORS.white} !important`,\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  close: {\n    position: 'absolute',\n    top: 0,\n    zIndex: '3',\n    right: 0,\n    width: '37px',\n    height: '37px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    cursor: 'pointer',\n    '&:hover': {\n      background: COLORS.darkGray,\n    },\n  },\n  closeIcon: {\n    color: COLORS.white,\n    fontSize: '32px',\n  },\n  header: {\n    background: '#8F0A09 0 0 no-repeat padding-box',\n    opacity: 0.95,\n    height: '119px',\n    color: '#FFFFFF',\n  },\n  innerHeader: {\n    padding: (props) => `${props.left} 0 0 30px`,\n  },\n  title: {\n    fontSize: '24px',\n    fontWeight: 'bold',\n  },\n  subTitle: {\n    fontSize: '18px',\n    '& span': {\n      fontWeight: 'bold',\n    },\n  },\n  innerContainer: {\n    paddingLeft: (props) => props.left,\n    display: 'flex',\n    flexDirection: 'column',\n    flex: '1 1 100%',\n    overflowY: 'auto',\n    '& .resource': {\n      padding: '5px 0',\n    },\n    '& a': {\n      color: '#2588AC',\n    },\n  },\n  subHeader: {\n    textTransform: 'uppercase',\n    color: COLORS.darkGray,\n    fontSize: '14px',\n    paddingTop: '20px',\n  },\n  visualization: {\n    width: '100%',\n    height: '500px',\n  },\n}));\n\nconst SidebarDetailed = ({ selectedCity }) => {\n  const classes = useStyles({ left: '25px' });\n  const history = useHistory();\n\n  // Get all refugee values for plotting\n  const values = merge(\n    (selectedCity ? selectedCity[1] : []).map((d) => {\n      return YEARS.map((i) => {\n        return {\n          year: moment(i, 'YYYY'),\n          country: d?.Nationality,\n          value: +d[`CY ${i}`],\n        };\n      });\n    }),\n  );\n  const city = selectedCity && selectedCity[0];\n\n  // Get total refugees for sub-header\n  const totalRefugees = sum(values, (d) => d.value);\n\n  return (\n    <div className={`${classes.container} ${selectedCity ? 'open' : ''}`}>\n      <div className={classes.close}>\n        <CloseIcon className={classes.closeIcon} onClick={() => history.push({ pathname: `/` })} />\n      </div>\n      <div className={classes.header}>\n        <div className={classes.innerHeader}>\n          <div className={classes.title}>{city}</div>\n          <div className={classes.subTitle}>\n            <span>{`${COMMA_FORMATTER(totalRefugees)} `}</span>refugees arrived over the last decade\n          </div>\n        </div>\n      </div>\n      {selectedCity && (\n        <>\n          <div className={classes.innerContainer}>\n            <div className={classes.subHeader}>\n              Country of origin change over time\n              <BaseChart className={classes.visualization}>\n                <LineChart values={values} />\n              </BaseChart>\n            </div>\n            <Resources selectedCity={selectedCity} />\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default SidebarDetailed;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core';\nimport { COLORS } from '../../../constants';\n\nconst useStyles = makeStyles(() => ({\n  dataSources: {\n    position: 'fixed',\n    bottom: '0px',\n    padding: '15px 0 16px 23px',\n    width: '100%',\n    backgroundColor: '#fff',\n    boxShadow: '0 0 6px 0 rgba(0, 0, 0, 0.16)',\n    color: COLORS.darkGray,\n    '& a': {\n      color: COLORS.blue,\n    },\n  },\n}));\n\nconst DataSources = () => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.dataSources}>\n      Data Sources:{' '}\n      <a href=\"https://www.wrapsnet.org/\" target=\"_blank\" rel=\"noopener noreferrer\">\n        Refugee Processing Center\n      </a>{' '}\n      and{' '}\n      <a href=\"https://www.charitynavigator.org/\" target=\"_blank\" rel=\"noopener noreferrer\">\n        Charity Navigator\n      </a>\n    </div>\n  );\n};\n\nexport default DataSources;\n","import React, { useEffect, useState } from 'react';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport { COLORS } from '../../../constants';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { ascending, groups } from 'd3-array';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { Button } from '@material-ui/core';\n\nconst WhiteCheckbox = withStyles({\n  root: {\n    color: COLORS.white,\n    '&$checked': {\n      color: COLORS.white,\n    },\n  },\n  checked: {},\n})((props) => <Checkbox color=\"default\" {...props} />);\n\nconst useStyles = makeStyles(() => ({\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n    backgroundColor: COLORS.darkRed,\n  },\n  headerContainer: {\n    padding: '0 0 0 25px',\n    flex: '0 0 calc(100% - 88px)',\n    height: 'calc(100% - 88px)',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  close: {\n    position: 'absolute',\n    top: 0,\n    zIndex: '3',\n    right: 0,\n    width: '37px',\n    height: '37px',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    cursor: 'pointer',\n    '&:hover': {\n      background: COLORS.darkGray,\n    },\n  },\n  closeIcon: {\n    color: COLORS.white,\n    fontSize: '32px',\n  },\n  regionContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    '& .header': {\n      '& .MuiTypography-root.MuiFormControlLabel-label.MuiTypography-body1': {\n        fontWeight: 'bold',\n      },\n    },\n    paddingBottom: '25px',\n  },\n  regionOuterContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    fontSize: '16px',\n    color: COLORS.white,\n    flex: '1 1 100%',\n    overflowY: 'auto',\n  },\n  buttonContainer: {\n    display: 'flex',\n    padding: '25px',\n    boxShadow: '0 0 6px 0 rgba(0, 0, 0, 0.16)',\n    '& button': {\n      color: COLORS.white,\n      border: `1px ${COLORS.lightRed} solid`,\n      fontWeight: 'bold',\n      backgroundColor: COLORS.darkRed,\n      '&:not(:last-child)': {\n        marginRight: '15px',\n      },\n      '&.apply': {\n        backgroundColor: COLORS.lightRed,\n      },\n      '&:hover': {\n        backgroundColor: COLORS.lightRed,\n      },\n    },\n  },\n}));\n\nconst SidebarFilter = ({ state, setState, nationalities }) => {\n  const classes = useStyles();\n\n  const { selectedNationalities } = state;\n  const nestedNationalities = groups(nationalities, ([, region]) => region);\n  const onlyNationalities = new Set(nationalities.map(([country]) => country));\n  const [localNationalities, setLocalNationalities] = useState(\n    selectedNationalities.length ? new Set(selectedNationalities) : onlyNationalities,\n  );\n\n  useEffect(() => {\n    setLocalNationalities(selectedNationalities.length ? new Set(selectedNationalities) : onlyNationalities);\n  }, [selectedNationalities, onlyNationalities]);\n\n  const onRegionChange = (values, isRegionChecked) => () => {\n    const xs = values.map(([country]) => country);\n    if (isRegionChecked) {\n      // deselect all in the region\n      setLocalNationalities(new Set([...localNationalities].filter((x) => !xs.includes(x))));\n    } else {\n      // select all in the region\n      setLocalNationalities(new Set([...localNationalities, ...new Set(xs)]));\n    }\n  };\n\n  const onCountryChange = (value) => () => {\n    // Add/remove from nationalities list\n    const country = new Set([value]);\n    if (localNationalities.has(value)) {\n      setLocalNationalities(new Set([...localNationalities].filter((x) => !country.has(x))));\n    } else {\n      setLocalNationalities(new Set([...localNationalities, ...country]));\n    }\n  };\n\n  const onApply = () =>\n    setState((prevState) => ({\n      ...prevState,\n      selectedNationalities: localNationalities.size === onlyNationalities.length ? [] : Array.from(localNationalities),\n      isFilterOpen: false,\n    }));\n\n  const onClear = () => setLocalNationalities(new Set([]));\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.close}>\n        <CloseIcon\n          className={classes.closeIcon}\n          onClick={() =>\n            setState((prevState) => ({\n              ...prevState,\n              isFilterOpen: false,\n            }))\n          }\n        />\n      </div>\n      <div className={classes.headerContainer}>\n        <h2>Select Country of Origin</h2>\n        <div className={classes.regionOuterContainer}>\n          {nestedNationalities\n            .sort((a, b) => ascending(a[0], b[0]))\n            .map(([region, values]) => {\n              const isRegionChecked = values.every(([country]) => localNationalities.has(country));\n              return (\n                <div className={classes.regionContainer} key={`group-section-for-${region}`}>\n                  <FormControlLabel\n                    className=\"header\"\n                    control={<WhiteCheckbox checked={isRegionChecked} onChange={onRegionChange(values, isRegionChecked)} name={region} />}\n                    label={`${region} (select all)`}\n                  />\n                  {values\n                    .sort((a, b) => ascending(a[0], b[0]))\n                    .map(([value]) => {\n                      return (\n                        <FormControlLabel\n                          key={`nationality-value-for-${value}`}\n                          control={<WhiteCheckbox checked={localNationalities.has(value)} onChange={onCountryChange(value)} name={value} />}\n                          label={value}\n                        />\n                      );\n                    })}\n                </div>\n              );\n            })}\n        </div>\n      </div>\n      <div className={classes.buttonContainer}>\n        <Button disabled={!localNationalities.size} onClick={onApply} variant=\"contained\" className=\"apply\">\n          Apply\n        </Button>\n        <Button onClick={onClear} variant=\"contained\">\n          Clear\n        </Button>\n      </div>\n      ;\n    </div>\n  );\n};\n\nexport default SidebarFilter;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Sidebar from './Sidebar';\nimport SidebarDetailed from './SidebarDetailed';\nimport { COLORS, SIDEBAR_WIDTH } from '../../constants';\nimport DataSources from './DataSources';\nimport SidebarFilter from './SidebarFilter';\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    width: SIDEBAR_WIDTH,\n    height: '100%',\n    position: 'fixed',\n    zIndex: '2',\n    top: 0,\n    right: 0,\n    borderRadius: '4px',\n    boxShadow: '0 8px 16px 0 rgba(61, 65, 72, 0.15)',\n    color: COLORS.white,\n    backgroundColor: COLORS.white,\n  },\n}));\n\nconst SidebarContainer = ({ selectedCity, cities, state, setState, filteredFeatures, nationalities }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.container}>\n      {state.isFilterOpen ? (\n        <SidebarFilter state={state} setState={setState} filteredFeatures={filteredFeatures} nationalities={nationalities} />\n      ) : (\n        <>\n          {selectedCity ? (\n            <SidebarDetailed selectedCity={selectedCity} />\n          ) : (\n            <Sidebar cities={cities} state={state} setState={setState} filteredFeatures={filteredFeatures} />\n          )}\n          <DataSources />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default SidebarContainer;\n","import React, { useEffect, useMemo, useState } from 'react';\nimport Map from './Map';\nimport { DEFAULT_VIEWPORT, REGION_LOOKUP, SPEED } from '../constants';\nimport Spinner from './Spinner';\nimport { csv } from 'd3-fetch';\nimport { useParams } from 'react-router-dom';\nimport { cityToId, getValue } from '../utils';\nimport { groups } from 'd3-array';\nimport SidebarContainer from './SidebarContainer';\nimport { FlyToInterpolator } from 'react-map-gl';\n\nconst App = () => {\n  const [state, setState] = useState({\n    viewport: DEFAULT_VIEWPORT,\n    selectedFeature: null,\n    selectedCalendarYear: '2020',\n    data: [],\n    selectedNationalities: [],\n    isFilterOpen: false,\n    nationalities: [],\n  });\n  const { city = '' } = useParams();\n\n  useEffect(() => {\n    csv(require('./../assets/data/refugees.csv'), (d) => {\n      return {\n        ...d,\n        location: `${d['Placement City']}, ${d['Placement State']}`,\n        nationality: d['Nationality'],\n        geometry: { type: 'Point', coordinates: JSON.parse(d.center) },\n      };\n    }).then((results) =>\n      setState((prevState) => ({\n        ...prevState,\n        data: results,\n      })),\n    );\n  }, []);\n\n  // Filter the data for the selected year - and selected nationalities\n  const filteredFeatures = state.data\n    .filter((d) => getValue(d, state.selectedCalendarYear))\n    .filter((d) => !state.selectedNationalities.length || state.selectedNationalities.includes(d.nationality));\n\n  // Get nationalities based on selected year\n  const nationalities = useMemo(\n    () =>\n      Array.from(new Set(state.data.filter((d) => getValue(d, state.selectedCalendarYear)).map((d) => d.Nationality))).map((d) => [\n        d,\n        REGION_LOOKUP.has(d) ? REGION_LOOKUP.get(d) : 'World',\n      ]),\n    [state.data, state.selectedCalendarYear],\n  );\n\n  // Group the data by city and create a feature collection\n  const cities = groups(filteredFeatures, (d) => d.location);\n\n  // If a route is specified then find it's feature\n  const selectedCity = cities.find((d) => cityToId(d[0]) === city);\n  const center = selectedCity && selectedCity[1][0].geometry.coordinates;\n\n  useEffect(() => {\n    if (center) {\n      const [longitude, latitude] = center;\n      setState((prevState) => {\n        return {\n          ...prevState,\n          viewport: {\n            longitude,\n            latitude,\n            zoom: 8,\n            transitionInterpolator: new FlyToInterpolator({ speed: SPEED }),\n            transitionDuration: 'auto',\n          },\n        };\n      });\n    } else {\n      setState((prevState) => {\n        return {\n          ...prevState,\n          viewport: DEFAULT_VIEWPORT,\n        };\n      });\n    }\n  }, [center]);\n\n  return (\n    <div className=\"App\">\n      {!state.data.length ? (\n        <Spinner />\n      ) : (\n        <>\n          <Map state={state} setState={setState} cities={cities} />\n          <SidebarContainer\n            state={state}\n            cities={cities}\n            selectedCity={selectedCity}\n            setState={setState}\n            filteredFeatures={filteredFeatures}\n            nationalities={nationalities}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './index.css';\nimport { BrowserRouter, Route } from 'react-router-dom';\n\nReactDOM.render(\n  <BrowserRouter basename={process.env.REACT_APP_PUBLIC_URL}>\n    <Route path={`/:city?`} component={App} />\n  </BrowserRouter>,\n  document.getElementById('root'),\n);\n","module.exports = __webpack_public_path__ + \"static/media/search.67e4e3d0.svg\";","module.exports = __webpack_public_path__ + \"static/media/filter.7200c1f8.svg\";"],"sourceRoot":""}